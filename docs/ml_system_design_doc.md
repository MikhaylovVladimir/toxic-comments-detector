# ML System Design Document

## Зачем идем в разработку продукта?

Модерация пользовательских комментариев — ключевая задача для онлайн-платформ, таких как форумы, соцсети, новостные сайты. Огромный поток сообщений невозможно проверять вручную, при этом токсичный контент вредит бренду, провоцирует конфликты и нарушает правила платформы.

Цель проекта — разработать модель, способную определять токсичность текста. Это поможет:
- автоматизировать модерацию;
- повысить безопасность и комфорт пользователей;
- снизить нагрузку на модераторов.

## Бизнес-требования и ограничения

**Требования:**
- Высокая точность на токсичных примерах (Recall ≥ 90%)
- Скорость ответа сервиса ≤ 100 мс
- API-интерфейс с простой интеграцией
- Интерпретируемость — важна возможность объяснить результат

**Ограничения:**
- Используются только публичные датасеты
- Вычисления на CPU (без GPU)
- Язык: русский или английский (по составу датасета)

## Что входит в скоуп проекта / итерации

**Входит:**
- EDA и анализ данных
- Подготовка и обучение baseline и основной модели
- Разработка FastAPI-инференса
- Минимальное нагрузочное тестирование
- Документирование архитектуры и процесса

**Не входит:**
- Продакшн-инфраструктура (k8s, CI/CD)
- Многоклассовая классификация (тип токсичности)
- Онлайн-обучение модели

## Предпосылки решения

Проблема токсичных комментариев хорошо изучена. Существуют:
- открытые датасеты (Jigsaw Toxic Comments, RuToxic и др.);
- готовые модели на основе BERT, RoBERTa и др.;
- библиотеки для быстрой интеграции (HuggingFace Transformers, scikit-learn и пр.).

Таким образом, MVP можно реализовать быстро и эффективно.

## Постановка задачи

**Задача:** бинарная классификация текстов на токсичные (`1`) и нетоксичные (`0`).

**Вход:** текст комментария  
**Выход:** метка `0` или `1` + вероятность

**Метрики качества:** f1-score, recall (для `1`), ROC-AUC

## Блок-схема решения

```mermaid
flowchart TD
    A[Input comment text] --> B[Text preprocessing]
    B --> C[ML model (e.g. BERT)]
    C --> D[Classification]
    D --> E[Output: 0/1 + probability]
    E --> F[FastAPI service]

```markdown
*Пояснение:*
- Input comment text — входной текст комментария
- Text preprocessing — очистка, токенизация
- ML model — обученная модель (например, BERT)
- Classification — предсказание метки токсичности
- FastAPI service — REST API-интерфейс

## Прочая информация

- Репозиторий: https://github.com/MikhaylovVladimir/toxic-comments-detector
- Основной язык: Python 3.9
- Линтеры: ruff, black
- Препроцессинг: pandas, nltk
- Модели: sklearn, transformers (BERT-like)
